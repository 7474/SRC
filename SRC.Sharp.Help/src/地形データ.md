---
layout: default
title: 地形データ
---
** 内容はSRC2.2.33のものに一部2.3系のものを反映したものです **

**地形データ**

マップ上の各種の地形を定義するためのデータです。

地形データはterrain.txt に記述します。他のデータファイルと異なり、作品毎にデータを定義する事は出来ません。データファイルが配置できる場所は、

SRC本体があるフォルダ\Data\System\terrain.txt

シナリオフォルダ\Data\System\terrain.txt

の２箇所のみに限定されています。

汎用データには基本的な地形データを定義した地形データが添付されています(Data\System\terrain.txt)。このファイルを変更すると既存のシナリオをプレイ出来なくなる恐れがあるので注意して下さい。新たな地形をシナリオで使用する場合は必ずシナリオフォルダ側の terrain.txt にその地形データを定義するようにして下さい。

なお、MapEditはシナリオフォルダに置いた地形データはシナリオフォルダに置かれたマップデータを読み込む際にのみ読み込みます。

このため、シナリオフォルダに置いた地形データを使うマップデータを新規に作成する場合は一旦新規にマップデータを作成してシナリオフォルダにセーブした後、MapEditからマップデータを読み込む必要があります。

**書式**

地形番号

名称, 画像ファイル名

地形タイプ, 移動コスト, 回避修正, ダメージ修正

地形効果

地形効果は１行に１つずつ複数指定可能です。

各行が長くなりすぎた場合は途中で改行することが出来ます。この場合は行の末尾に「\_」を付けて下さい。

「#」で始まる行はコメント行とみなされ、データ読み込みの際に存在しないものとして扱われます。また、「//」以降の文字列はコメント部分として無視されます。

**例**
```sh
35
宇宙要塞, space\_fortress
宇宙, 2, 30, 30
ＨＰ回復Lv1
ＥＮ回復Lv2
衝突
```

**項目解説**

**(1)地形番号**

地形データの識別用番号を指定します。0～1999の値を指定可能ですが、0～999の値はSRC本体側の地形データ用になっていますので、シナリオ側で新しい地形を追加する際には1000～1999の値を使ってください。

同じ地形番号のデータ定義が複数ある場合は最後のものが優先されます。これを利用して本体側の地形データファイルで定義された地形データをシナリオ側で置き換えることが可能です。

**(2)名称**

MapEditやステータスウィンドウ等で表示される地形の名称を指定します。

**(3)画像ファイル名**

地形データに対応した地形画像ファイル名を指定します。他のデータと異なり、地形データは１つの地形に対して複数の画像が使われるため、ここでは実際の画像ファイル名から画像ファイルの番号と「.bmp」の部分を省略したものを指定します。この画像ファイル名は必ず小文字の英字「a-z」、数字「0-9」、アンダーバー「\_」のみから構成されるようにして下さい。

**指定例** plain

**画像ファイル名(新形式)** plain0000.bmp, plain0001.bmp, plain0002.bmp, …

**画像ファイル名(旧形式)** plain0.bmp, plain1.bmp, plain2.bmp, …

Ver.2.1以降では画像の番号が4桁で指定されたファイル名の画像を表示することが可能です。Ver.2.0以前の旧形式のファイル名も表示することが出来ます。両者が混在する場合は新形式のファイル名のファイルが優先されます。

**(4)地形タイプ**

地形の種類を指定します。地形タイプ毎にユニットが進入・通過可能な位置(地上、空中等)が決まっています。

また地形タイプ毎に地形の移動コスト、回避修正、ダメージ修正が適用される位置が決まっています(無効の場合はそれぞれ1、0、0として扱われます)。

以下の地形タイプを指定可能です。

**陸**

地表に存在する地形であることを示します。

地上、空中、地中の位置に進入・通過可能です。

地上にいる場合にのみ移動コスト、回避修正、ダメージ修正が適用されます。

**屋内**

地表に存在する地形であることを示します。

地上、空中の位置に進入・通過可能です。(つまり「陸」と異なり地中を移動できません)

地上にいる場合にのみ移動コスト、回避修正、ダメージ修正が適用されます。

**水**

水面を含む地形であることを示します。

水中、水上、空中の位置に進入・通過可能です。つまり飛行能力・水上移動能力を持たないユニットは本タイプの地形では水中を移動する事になります。

水中にいるユニットに対してのみ移動コスト、回避修正、ダメージ修正が適用されます。

**深水**

深い水を含む地形であることを示します。

「水」と同じく水中、水上、空中の位置に進入・通過可能ですが、「水」と異なり移動可能地形に「水」を含むか、水泳能力を持つユニットのみが水中に進入することが出来ます。

水中にいるユニットに対してのみ移動コスト、回避修正、ダメージ修正が適用されます。

**空**

空中に存在する地形である事を示します。

空中の位置にのみ進入・通過可能です。つまり飛行能力を持たないユニットは進入・通過することが出来ません。

移動コスト、回避修正、ダメージ修正が常に適用されます。

**宇宙**

宇宙に存在する地形である事を示します。

宇宙の位置にのみ進入・通過可能です。つまり宇宙への適応を持たないユニットは進入・通過することが出来ません。

移動コスト、回避修正、ダメージ修正が常に適用されます。

**月面**

月面に存在する地形である事を示します。

地上、宇宙、地中の位置に進入・通過可能です。

地上にいる場合にのみ移動コスト、回避修正、ダメージ修正が適用されます。

**(5)移動コスト**

ユニットがその地形のマスに進入するために必要な移動力を表します。

移動コストは0.5刻みで指定可能です。(0.5, 1, 1.5, 2, …)

移動コストに0以下の値を指定することは出来ません。

ユニットが地形タイプで定められた位置にいない場合は指定された移動コストにかかわらず移動力の消費は1となるので注意して下さい。

壁のように通過することの出来ない地形には数値の代わりに「-」と指定してください。

**(6)回避修正**

その地形にいるユニットが攻撃を受けた際に命中率が本来の値からどれだけ低下するかを表します。命中率の計算式については[戦闘システム詳細](戦闘システム詳細.md)の項を参照して下さい。

**(7)ダメージ修正**

その地形にいるユニットが攻撃を受けた際にダメージが本来の値からどれだけ低下するかを表します。ダメージの計算式については[戦闘システム詳細](戦闘システム詳細.md)の項を参照して下さい。

**(8)地形効果**

地形が持つ特殊な効果を表します。ユニットデータ等の特殊能力と同じく、地形効果にはレベル指定やオプション指定を伴うものもあります。

以下の地形効果が指定可能です。

**ＨＰ回復**

**書式** ＨＰ回復Lv\*

ターン開始時に地形上のユニットのＨＰが10×効果レベル%回復します。

**ＥＮ回復**

**書式** ＥＮ回復Lv\*

ターン開始時に地形上のユニットのＥＮが10×効果レベル%回復します。

**ＨＰ減少**

**書式** ＨＰ減少Lv\*=*属性*

ターン開始時に地形上のユニットのＨＰが10×効果レベル%減少します。ただしこれによりユニットが破壊される事はありません。(ＨＰが1になるだけ)

属性が指定されていた場合、ユニットがその属性に対する「耐性」や「無効化」、「弱点」、「吸収」等の特殊能力を所有しているとＨＰの減少率が変化します。

**耐性**減少率が半減(5×効果レベル%)

**無効化**減少しない

**吸収**ＨＰが逆に増加(10×効果レベル%)

**弱点**減少率が倍増(20×効果レベル%)

**ＥＮ減少**

**書式** ＥＮ減少Lv\*=*属性*

ターン開始時に地形上のユニットのＥＮが10×効果レベル%減少します。

属性が指定されていた場合、ユニットがその属性に対する「耐性」や「無効化」、「弱点」、「吸収」等の特殊能力を所有しているとＥＮの減少率が変化します。

**耐性**減少率が半減(5×効果レベル%)

**無効化**減少しない

**吸収**ＥＮが逆に増加(10×効果レベル%)

**弱点**減少率が倍増(20×効果レベル%)

**ＨＰ増加**

**書式** ＨＰ増加Lv\*

ターン開始時に地形上のユニットのＨＰが1000×効果レベル回復します。

**ＥＮ増加**

**書式** ＥＮ増加Lv\*

ターン開始時に地形上のユニットのＥＮが10×効果レベル回復します。

**ＨＰ低下**

**書式** ＨＰ低下Lv\*=*属性*

ターン開始時に地形上のユニットのＨＰが1000×効果レベル減少します。ただしこれによりユニットが破壊される事はありません。(ＨＰが1になるだけ)

属性が指定されていた場合、ユニットがその属性に対する「耐性」や「無効化」、「弱点」、「吸収」等の特殊能力を所有しているとＨＰの減少量が変化します。

**耐性**減少量が半減(500×効果レベル)

**無効化**減少しない

**吸収**ＨＰが逆に増加(1000×効果レベル)

**弱点**減少量が倍増(2000×効果レベル)

**ＥＮ低下**

**書式** ＥＮ低下Lv\*=*属性*

ターン開始時に地形上のユニットのＥＮが10×効果レベル減少します。

属性が指定されていた場合、ユニットがその属性に対する「耐性」や「無効化」、「弱点」、「吸収」等の特殊能力を所有しているとＥＮの減少量が変化します。

**耐性**減少量が半減(5×効果レベル)

**無効化**減少しない

**吸収**ＥＮが逆に増加(10×効果レベル)

**弱点**減少量が倍増(20×効果レベル)

**状態付加**

**書式** 状態付加Lv\*=*状態名*

ターン開始時に地形上のユニットに対して指定した状態が付加されます。

状態の持続時間は効果レベルと同じターン数に設定されます。状態がステージ終了まで継続されるようにするには効果レベルの指定を省略して下さい。

ユニットが指定した属性を誘発する武器属性に対して「特殊効果無効化」の特殊能力を持っている場合、状態付加は無視されます。

**例** 状態付加Lv3=毒

**衝突**

吹属性武器等による攻撃でユニットが吹き飛ばされた際にユニットがその地形上で衝突することを示します。衝突の際には衝突ダメージがユニットに適用されます。

**摩擦**

**書式** 摩擦Lv\*

吹属性武器等による攻撃でユニットが吹き飛ばされた際にユニットがその地形上を通ると、吹き飛ばされる距離が摩擦レベルだけ減少します。

**侵入禁止**

その地形に対して地形適応能力を持つユニットのみが侵入出来るようになります。
ただし、通常の地形と異なり地形適応能力を持っていても侵入時にかかる移動コストは地形データのままになります。(通常の地形の場合は地形適応能力の効果により常に移動コストは1)

**移動停止**

ユニットがその地形に入った時点でユニットが移動を停止しないといけなくなります。

つまり進入は可能ですが、移動中に通過することが出来ない地形です。

**効果範囲**

**書式** 効果範囲=ユニット位置

地形効果がユニットが特定の位置にいた時にのみ有効になります。
指定可能なユニット位置は「地上」「空中」「水中」「水上」「宇宙」「地中」です。
本効果の影響を受ける地形効果は「ＨＰ回復」「ＥＮ回復」「ＨＰ減少」「ＥＮ減少」「ＨＰ増加」「ＥＮ増加」「ＨＰ低下」「ＥＮ低下」「状態付加」「移動停止」です。
本効果の指定が無かった場合、上記の地形効果はユニットがどの位置にいても有効です。

**例** 効果範囲=地上

**エディタ非表示**

該当する地形をMapEditの地形一覧に表示しないようにします。

[ChangeTerrainコマンド](ChangeTerrainコマンド.md)でのみ使うための地形等に使うと良いでしょう。
