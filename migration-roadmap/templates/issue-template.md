# GitHub Issue テンプレート

このテンプレートを使用して、各Epic タスクの個別Issueを作成してください。以下のセクションを各具体的実装タスクに合わせてコピー・カスタマイズしてください。

## Issue タイトル形式
`[Epic X.Y] 簡潔なタスク説明`

**例:**
- `[Epic A.1] セーブ/ロードパス正規化とセキュリティの実装`
- `[Epic B.1] AI武器選択バグの修正`
- `[Epic C.1] 文字列バイト関数の実装`

## Issue テンプレート

### Epic 情報
- **Epic**: [Epic 文字] - [Epic 名]
- **優先度**: [重要/高/中/低]
- **スプリント**: [スプリント番号]
- **予想工数**: [X日]
- **リスクレベル**: [重要/高/中/低/極低]

### 問題ステートメント
[このタスクが対処する具体的問題を記述]

### 技術要件
[具体的な技術要件と実装詳細をリスト]

#### 影響ファイル
- `[ファイルパス1]` ([プライマリ/セカンダリ/新規])
- `[ファイルパス2]` ([プライマリ/セカンダリ/新規])
- `[ファイルパス3]` ([プライマリ/セカンダリ/新規])

### 受け入れ基準
- [ ] [具体的基準1]
- [ ] [具体的基準2]
- [ ] [具体的基準3]
- [ ] [具体的基準4]
- [ ] [具体的基準5]

### テスト要件
- [テスト要件1]
- [テスト要件2]
- [テスト要件3]
- [テスト要件4]

### 依存関係
#### 外部依存関係
- [外部依存関係1]
- [外部依存関係2]

#### 内部依存関係
- [内部依存関係1]
- [内部依存関係2]

### 実装ノート
[具体的な実装ノート、従うべきパターン、またはアーキテクチャ上の考慮事項]

### 完了定義
- [ ] 実装完了
- [ ] すべての受け入れ基準達成
- [ ] テスト要件満足
- [ ] コードレビュー合格
- [ ] ドキュメント更新（該当する場合）
- [ ] リグレッション未導入
- [ ] パフォーマンス影響評価済み

---

## 適用ラベル

### Epic ラベル
- `epic:save-load` (Epic A)
- `epic:commands` (Epic B)
- `epic:expressions` (Epic C)
- `epic:configuration` (Epic D)
- `epic:system-libraries` (Epic E)
- `epic:test-infrastructure` (Epic F)
- `epic:legacy-cleanup` (Epic G)
- `epic:ui-platform` (Epic H)

### 優先度ラベル
- `priority:critical`
- `priority:high`
- `priority:medium`
- `priority:low`

### スプリントラベル
- `sprint:1`
- `sprint:2`
- `sprint:3`
- `sprint:4`
- `sprint:4+`

### タイプラベル
- `type:bug` (バグ修正用)
- `type:feature` (新機能用)
- `type:enhancement` (改善用)
- `type:maintenance` (クリーンアップ/リファクタリング用)

### エリアラベル
- `area:security`
- `area:performance`
- `area:ui`
- `area:ai`
- `area:testing`
- `area:cross-platform`
- `area:accessibility`

### サイズラベル
- `size:xs` (< 0.5日)
- `size:s` (0.5-1日)
- `size:m` (1-3日)
- `size:l` (3-5日)
- `size:xl` (5日以上)

---

## Issue例

### [Epic A.1] セーブ/ロードパス正規化とセキュリティの実装

#### Epic 情報
- **Epic**: A - セーブ/ロードシステム
- **優先度**: 重要
- **スプリント**: 1
- **予想工数**: 3日
- **リスクレベル**: 重要（セキュリティ）

#### 問題ステートメント
現在のセーブ/ロード操作は適切なパス検証を欠いており、パストラバーサル攻撃による潜在的なセキュリティ脆弱性を生じています。ユーザーが意図したセーブディレクトリ外のファイルにアクセスできる可能性があります。

#### 技術要件
- すべてのファイル操作にパス正規化を実装
- ディレクトリトラバーサルを防ぐセキュリティ検証を追加
- ファイル拡張子とコンテンツタイプの検証
- 無効なパスに対する適切なエラーハンドリングを追加
- クロスプラットフォームパス処理互換性を確保

#### 影響ファイル
- `SRCCore/SRC.cs` (プライマリ)
- `SRCCore/IO/FileOperations.cs` (セカンダリ)
- `SRCCore/Security/PathValidator.cs` (新規)

#### 受け入れ基準
- [ ] すべてのファイルパスが使用前に適切に正規化される
- [ ] パストラバーサル試行がブロックされログ記録される
- [ ] ファイル拡張子検証が実装される
- [ ] セキュリティテストが通る
- [ ] 後方互換性が維持される
- [ ] クロスプラットフォームパス処理が動作

#### テスト要件
- 悪意のあるパスでのセキュリティ侵入テスト
- パストラバーサル攻撃シミュレーション
- クロスプラットフォームパス処理検証
- パフォーマンス影響評価
- 後方互換性テスト

#### 依存関係
##### 外部依存関係
- セキュリティテストツール
- クロスプラットフォームファイルシステムテスト
- パス検証ライブラリ

##### 内部依存関係
- ログシステム（Epic E）
- 設定システム（Epic D）
- エラーハンドリングユーティリティ

#### 実装ノート
- 正規化にSystem.IO.Path.GetFullPath()を使用
- 有効ディレクトリのホワイトリストアプローチを実装
- 監視のためすべてのセキュリティ違反をログ記録
- 正当なファイル操作のパフォーマンスを維持
- ファイルアップロードセキュリティのOWASPガイドラインに従う

#### 完了定義
- [ ] 実装完了
- [ ] すべての受け入れ基準達成
- [ ] セキュリティテスト合格
- [ ] パフォーマンスベンチマーク維持
- [ ] コードレビュー合格
- [ ] ドキュメント更新済み
- [ ] セーブ/ロード機能にリグレッションなし

**ラベル**: `epic:save-load`, `priority:critical`, `sprint:1`, `type:enhancement`, `area:security`, `size:m`

---

このテンプレートは、移行ロードマップで特定された26個の個別Issue作成に使用されるべきです。各Epic文書には、これらのテンプレートに必要な詳細情報が含まれています。