# SRC開発版更新情報

http://www.src-srpg.jpn.org/development_history.shtml からの転記。

----

SRC開発版 Ver.2.3.* 2.4.0プレリリースの更新情報です。
これより昔のバージョンについては安定版のヘルプを参照して下さい。

## ■2.4.0プレリリース追加コマンド書式
※srcBeta.hlpに未収録のコマンドです。
```
ChangeLayerコマンド

指定した座標のレイヤーを変更

書式
ChangeLayer X Y Name Number [Option]
X マップのX座標
Y マップのY座標
Name マップの地形名称
Number マップの地形番号
Option 通常 レイヤがデータ情報と見た目情報を両方とも持つ
情報限定 レイヤが地形効果などのデータ情報のみ持つ
画像限定 レイヤが見た目上の情報のみ持つ

(X,Y)の座標のマップ上層レイヤーを指定したレイヤーに変更します。

Optionに情報限定を指定することで、変更先に指定された地形の地形効果などのデータのみを配置することが可能です。
画像限定を指定することで、変更先に指定された地形の画像のみを表示する事が可能です。

ChangeLayerコマンドを使用するだけではマップ表示は更新されません。Redrawコマンドを使って手動で更新してください。
ClearLayerコマンド

レイヤー情報を削除

書式１
ClearLayer [Option]
書式２
ClearLayer X Y [Option]

X マップのX座標
Y マップのY座標
Option 通常 レイヤがデータ情報と見た目情報を両方とも持つ
情報限定 地形効果などのデータ情報のみ削除する。画像のみ残る。
画像限定 見た目上の情報のみ削除する。地形効果などの情報のみ残る。

書式１は、(X,Y)の座標のマップ上層レイヤーを削除します。
書式２は、マップ上全てのマスのレイヤーを削除します。

Optionに情報限定を指定することで、地形効果などのデータのみを削除することが可能です。
つまり、見た目上の画像情報のみが残ります。

画像限定を指定することで、画像のみを削除する事が可能です。
つまり、地形効果などのデータのみ残ります。
SetWindowColorコマンド

新ＧＵＩのステータス画面の色を変更

書式
SetWindowColor rgb [Option]
rgb 変更する色
Option 枠 枠（ステータス表示領域を囲む部分）の色を変更する場合
背景 背景部分の色を変更する場合

ターン数、資金、地形情報、ユニットステータスなどを表示する部分の色を変更します。
色の指定はColorコマンドなどと同様に#RRGGBBやRGB関数を使用して行います。
Optionを指定しなかった場合は、枠・幅の両方の色を変更します。
このコマンドを実行する前のデフォルトの色は、枠・幅ともに旧来の色と同じです。
SetWindowFrameWidthコマンド

新ＧＵＩのステータス画面の枠の幅を変更

書式
SetWindowFrameWidth width
width 枠の幅。ドット数で指定します。

ターン数、資金、地形情報、ユニットステータスなどを表示する部分の枠の幅を変更します。
このコマンドを実行する前のデフォルトの幅は1となります。
SetStatusStringColorコマンド

ステータス画面の文字色を変更する。

書式
SetStatusStringColor rgb target

rgb 色を指定(#RRGGBB形式)
target 通常 黒で描画されている文字を変更
能力名 「レベル」「ＳＰ」等の暗い青で描画されている文字色を変更
有効 特殊能力が有効になっている場合などの明るい青で描画されている文字色を変更
無効 特殊能力が無効になっている場合などの暗い赤で描画されている文字色を変更
```



## Ver.2.4.0 プレリリース (2012/11/25版)

```
■機能追加
・SetStatusStringColorコマンドを追加した。

■バグフィックス
・新ＧＵＩ使用時、中断データから再開するとステータス画面の色がおかしくなるのを修正した。
・新ＧＵＩ使用時、ステータス画面のアビリティ情報がずれて表示される場合があるのを修正した。
・標準ＧＵＩでインターミッションのステータス表示中でも地形データが表示されるのを修正した。

■仕様変更
・Option 新ＧＵＩはプロローグ・エピローグ以外で指定すると正常に実行されない仕様を変更した。
どのタイミングで実行しても正常動作するはずですが動作保障はできません。
他のOptionコマンド同様、プロローグ・エピローグラベルで実行をお願いします。
・新ＧＵＩ使用時、ユニット選択時にステータス画面を表示しないようにした。
Ver.2.4.0 プレリリース (2012/06/19版)

■仕様変更

・Option 新ＧＵＩはプロローグ・エピローグ以外で指定すると正常に実行されない仕様を変更した。
・どのタイミングで実行しても正常動作するはずですが動作保障はできません。
・他のOptionコマンド同様、プロローグ・エピローグラベルで実行をお願いします。

・新ＧＵＩ使用時、ユニット選択時にステータス画面を表示しないようにした。

■バグフィックス

・新ＧＵＩ使用時、中断データから再開するとステータス画面の色がおかしくなるのを修正した。

・新ＧＵＩ使用時、ステータス画面のアビリティ情報がずれて表示される場合があるのを修正した。

・標準ＧＵＩでインターミッションのステータス表示中でも地形データが表示されるのを修正した。
```


## Ver.2.4.0 プレリリース (2012/06/17版)

```
■機能追加

新ＧＵＩ使用時に、ユニットのいないマップ上で右クリックした場合、地形データを表示するようにした。

通常ＧＵＩ使用時に、マウスカーソルが上に来た時点で地形データを表示するようにした。

・ステータス画面の地形データに、マップ画像を表示するようにした。

・SetWindowColorコマンドを追加した。

・SetWindowFrameWidthコマンドを追加した。

・新ＧＵＩ使用時、ステータス画面ギリギリに文字が表示されていたのを、少しスペースを空けて表示するようにした。

　※マップ描画の処理を追加したため、マシンによってパフォーマンスが低下する恐れがあります。
　動作環境を満たしているのにマップ描画がもたつく場合はプレリリース掲示板等でご報告いただけると助かります。

■バグフィックス
・レイヤーマップ使用時に中断から再開すると表示がおかしい場合があるのを修正した。

・2.2.0系、2.3.0系で作成した中断セーブデータから再開するとマップが表示されないのを修正した。
```

## Ver.2.4.0 プレリリース (2012/06/12版)

```
・クイックロードでマップ状態が切り戻る現象を修正した。
```


## Ver.2.4.0 プレリリース (2012/06/10版)

```
■機能変更

・MELTを使用して作成された、レイヤ情報を持つマップデータ（ver2.3）を読み込んでレイヤ情報を持つマップを作成するようにした。
これにより、2.3.1以前のバージョンから以下の変更があります。
・SRC2.4.0以降で作成された中断データは従前のSRCでは読み込めない。
・レイヤとして指定された地形は見た目だけではなく、地形としてのデータを持つようになった。
　平野のマップチップの上にビルを上層レイヤとして配置した場合、そのマスはビルになります。
　レイヤをただの見た目にしたい場合は、後述する新コマンドで地形情報のみを削除します。

・ChangeLayerコマンドを追加した。

・ClearLayerコマンドを追加した。

・関数「WindowWidth」「WindowHeight」を追加した。それぞれ、画面のサイズを取得できます。例：新ＧＵＩ使用時はWindowWidth()で640を返す

・新ＧＵＩ使用時、ユニットの移動先選択時にも、ユニット上にマウスカーソルが来たときにステータスを表示するようにした。
```

## Ver.2.4.0 プレリリース (2012/06/03版)

```
■機能変更

・ユニットコマンドを表示している状態で別のユニットをクリックした場合、選択できるようにした。
・新ＧＵＩ使用時、ユニット上にマウスカーソルが来た時にステータスを表示するようにした。


■バグフィックス

・新ＧＵＩでカーソル自動移動が半マスずれるのを修正した。

・ＳＰなしのパイロットを表示すると、ＳＰ以下のパイロット能力が上にずれるのを修正した。

・新ＧＵＩのユニットステータスで、特殊能力名がステータス欄をはみだす場合があるのを修正した。

・Src.iniで指定した拡張フォルダが適用されない場合があるのを修正した。

・データロード時、Option「新ＧＵＩ」が適用されないのを修正した。
```

## Ver.2.4.0 プレリリース (2012/05/26版)
```
■機能変更
・Option「新ＧＵＩ」を追加した。指定すると、iniファイルの指定に関係なく新ＧＵＩが使用されます。

・Info関数で新ＧＵＩを使用しているか取得可能にした。
iniで指定されているかはInfo(オプション, NewGUI)で取得できます。
　Optionコマンドで指定されているかはInfo(オプション, 新ＧＵＩ)で取得可能です。

・地形効果「侵入禁止」を、「進入禁止」と定義しても有効になるように変更した。

・攻撃を実行したメッセージを、攻撃アニメ表示前に出力するように変更した。

■バグフィックス

・SRC.ini NewGUI=Onに中心のマスがウインドウの中心に配置されるように表示座標を修正

・移動後コマンドをキャンセルし、再度移動先を選択すると行動が終了してしまうバグを修正した。

・IntermissonCommandで追加したコマンドが反映されないバグを修正した。

・新ＧＵＩ使用時に、中央を表示するカーソルが半マスずれてしまうバグを修正した。

・反撃の可否が正しく判定されない場合があるバグを修正した。

・広域阻止のヘルプメッセージで発動率が表示されていなかったのを修正した。
```

## Ver.2.3.1 (07/01/21)
```
・イベントコマンド「Exec」を追加した。
・イベントコマンド「CallIntermissionCommand」を追加した。
・イベントコマンド「SaveData」を追加した。
・Src.iniの設定項目に「MP3OutputBlock」「MP3InputSleep」を追加した。
・戦闘アニメデータのシチュエーション「終了」「武器名(終了)」「アビリティ名(終了)」はマウスの右ボタンクリックでキャンセルされないようにした。
・クイックロードや中断データからの再開をすると不安定能力を持つユニットが必ず暴走してしまうバグを直した。
・初回起動時のSrc.ini作成時にDirectMusicが使えるかどうか正しく判定できないバグを直した。
・RemoveItemコマンドで全てのアイテムの装備が解除されないことがあるバグを直した。
・Lineコマンドで描画した直線をClearPictureコマンドで消去できないことがあるバグを直した。
・Talkコマンド、AutoTalkコマンドで「フィルタ」オプションが指定できないバグを直した。
・制御不可能力に指定した必要技能や必要条件が正しく動作しないバグを直した。
・シナリオ側のSrc.iniに元々記述していないエントリの設定が書き込まれてしまうバグを直した。
・パイロット用特殊能力「気力上限」で気力の上限を上げていても気力が150に達していると気力増加アビリティを使えないバグを直した。
・「無効化=全」を持っているユニットが召喚アビリティを使えないことがあるバグを直した。
```

## Ver.2.3.0 (06/12/29)
```
・設定変更コマンドの設定に「戦闘アニメの拡張機能を使用する」を追加した。
・ユニット用特殊能力「武器割合強化」を追加した。
・ユニット用特殊能力「地形効果無効化」を追加した。
・ユニット用特殊能力「拡大画像」を追加した。
・ユニット用特殊能力「地形適応」を持つ場合、もともと移動コストが1の地形は移動コスト0.5で移動できるようにした。
・ユニット用特殊能力「移動制限」「進入不可」を同一ユニットに複数も持てるようにした。
・戦闘アニメデータのシチュエーションに「ダメージ表示」を追加した。
・戦闘アニメデータのシチュエーションに「武器名(終了)」「アビリティ名(終了)」を追加した。
・サブルーチン「戦闘アニメ_ダメージ表示発動」が定義されている場合、戦闘アニメの拡張機能が有効になっていればダメージ表示時に自動で呼び出すようにした。
・サブルーチン「戦闘アニメ_終了発動」が定義されている場合、攻撃、アビリティ使用終了時に自動で呼び出すようにした。
・スペシャルパワー効果「地形効果無効化」を追加した。
・スペシャルパワー効果「回復不能」を追加した。
・地形効果「効果範囲」を追加した。
・地形効果「侵入禁止」を追加した。
・Src.iniの設定に「ExtendedAnimation」を追加した。
・イベントコマンド「PaintSysString」を追加した。
・ClearObjコマンドに「非同期」オプションを追加した。
・Organizeコマンドに「非同期」「アニメ非表示」オプションを追加した。
・Info関数でオプション「ExtendedAnimation」の設定を参照できるようにした。
・戦闘アニメを表示する際は攻撃時のシステムメッセージのウェイトを無くした。
・Ｍ全属性以外のマップ攻撃、マップアビリティは目標地点選択後に一旦効果範囲を表示してプレイヤーに選択を促すようにした。
・ステータスウィンドウに地形の状態付加効果の説明を表示するようにした。
・ステータスウィンドウに武器・アビリティがＱ属性を持っているかどうかを表示するようにした。
・MapEditにおいてマウスカーソルが置かれた地形の名称とファイル名を表示するようにした。
```
