**バトルコンフィグデータ**

戦闘時の命中率やダメージは[戦闘システム詳細](戦闘システム詳細.md)で述べた計算式に基づいて算出されます。

バトルコンフィグデータを定義することにより、ダメージ、命中率、クリティカル発生率、特殊効果発生率の計算式の一部をユーザ側で変更することが出来ます。

![](../images/bm0.gif) バトルコンフィグデータを定義すると敵の思考時間が長くなってしまうことがあるのでご注意下さい。

バトルコンフィグデータはbattle.txt に記述します。他のデータファイルと異なり、作品毎にデータを定義する事は出来ません。データファイルが配置できる場所は、

SRC本体があるフォルダ\Data\System\battle.txt

シナリオフォルダ\Data\System\battle.txt

の２箇所のみに限定されています。

**書式**

コンフィグ対象

計算式

**例**

命中率

130 + 攻撃側補正 - 防御側補正

命中補正

命中 + 攻撃値

回避補正

回避 + 運動性

攻撃補正

武器威力 \* (攻撃値 + 気力) \ 200

防御補正

装甲値 \* (耐久 + 気力) \ 200

クリティカル攻撃補正

(攻撃値 + 技量) \* Call(敵半減,攻撃側ユニットＩＤ)

クリティカル防御補正

技量 \* Call(敵半減,攻撃側ユニットＩＤ)

特殊効果攻撃補正

(攻撃値 + 技量 \ 2) \* Call(敵半減,攻撃側ユニットＩＤ)

特殊効果防御補正

技量 \* Call(敵半減,攻撃側ユニットＩＤ) \ 2 + Call(ザコ補正,防御側ユニットＩＤ)

**項目解説**

**(1)コンフィグ対象**

変更する対象の計算式を指定します。以下に挙げた計算式の全てが変更可能です。「＝」の右側の計算式名をコンフィグ対象に指定して下さい。

**◆攻撃の命中率**

命中率   ＝ ( 命中補正 ＋ 回避補正 ) × 地形命中率修正 × サイズ補正

命中補正 ＝ 100 ＋ パイロット命中 ＋ パイロット反応 ＋ ユニット運動性 ＋ 武器命中率

回避補正 ＝ パイロット回避 ＋ パイロット反応 ＋ ユニット運動性

**◆攻撃のダメージ**

ダメージ     ＝ ( 攻撃地形補正 － 防御補正 ) × 地形ダメージ修正

攻撃地形補正 ＝ 攻撃力補正 × 地形適応

攻撃補正     ＝ 武器威力 × パイロット攻撃力/100 × 気力/100

防御補正     ＝ 装甲値 × 気力/100 × 地形適応

**◆クリティカル発生率**

クリティカル発生率   ＝ クリティカル攻撃補正 － クリティカル防御補正

クリティカル攻撃補正 ＝ 武器のＣＴ率修正 ＋ 攻撃側の技量

クリティカル防御補正 ＝ 防御側の技量

**◆特殊効果発生率**

特殊効果発生率   ＝ 特殊効果攻撃補正 － 特殊効果防御補正

特殊効果攻撃補正 ＝ 武器のＣＴ率修正 ＋ 攻撃側の技量

特殊効果防御補正 ＝ 防御側の技量/2 － ザコ補正

また、一般的な計算式では表現できない例外的な補正(特殊能力による修正等)を表現するため、上で算出した命中率、ダメージ、クリティカル発生率、特殊効果発生率を修正する以下の計算式を指定可能です。

最終命中率             ＝ 命中率

最終ダメージ           ＝ ダメージ

最終クリティカル発生率 ＝ クリティカル発生率

最終特殊効果発生率     ＝ 特殊効果発生率

**(2)計算式**

(1)で指定された式の値を計算する式を定義し直します。上の計算式の「＝」の右側の式を自分で定義し直すと考えてください。

この式はイベントデータの[式](式.md)と同様に処理されるため、通常の[変数](変数.md)や[関数](関数.md)を自由に使うことが出来ます。イベントデータ側で定義した関数を呼び出すことも可能です。

また、計算式中で戦闘に参加しているユニットに関する各種の数値を以下のバトルコンフィグ変数を使って参照することが出来ます。バトルコンフィグ変数はバトルコンフィグデータの式の計算時にのみ参照可能なシステム変数です。変数に入る値は計算式の対象が攻撃側か防御側かで自動的に数値が変化します。

**攻撃値**対象となる計算式の種類で参照される値が変わります。

**攻撃補正**の計算式ではメインパイロットの格闘、または射撃(あるいは両方)が使われます。

(攻撃する武器のタイプによって、適切な数値が選択されます。)

**命中補正**の計算式では武器の命中率が使われます。

**クリティカル攻撃補正**と**特殊効果攻撃補正**では武器のＣＴ率が使われます。

**地形適応**使用するコンフィグ対象で内容が異なります。

命中率：地形命中率の修正値が入ります。

攻撃地形補正：武器の地形適応修正値が入ります。

防御補正：ユニットの地形適応修正値が入ります。

(Optionコマンドの設定によってパイロットの地形適応修正値が使われることもあります。)

そのほか：計算上、そのほかのコンフィグ対象では使用できません。

**武器威力**武器の攻撃力(各種計算を経た後のもの)が入ります。

攻撃補正でのみ使用可能です。

**装甲値**装甲補正でのみ使用可能です。

装甲（各種計算を経た後のもの）に置換されます。

「装甲」とは異なる値になる場合があります。

**サイズ補正**サイズによる修正値が入ります。

命中率補正でのみ使用可能です。

**攻撃側補正**使用するコンフィグ対象で内容が異なります。

命中率：命中補正の計算結果が入ります。

ダメージ：攻撃補正地形修正後の計算結果が入ります。

クリティカル発生率：クリティカル攻撃補正の計算結果が入ります。

特殊効果発生率：特殊効果攻撃補正の計算結果が入ります

そのほか：計算上、そのほかのコンフィグ対象では使用できません。

**防御側補正**使用するコンフィグ対象で内容が異なります。

命中率：回避補正の計算結果が入ります。

ダメージ：装甲補正の計算結果が入ります。

クリティカル発生率：クリティカル防御補正の計算結果が入ります。

特殊効果発生率：特殊効果防御補正の計算結果が入ります

そのほか：計算上、そのほかのコンフィグ対象では使用できません。

**ザコ補正**コンフィグ対象が特殊効果防御補正である場合にのみ使用可能です。

ユニットに乗っているパイロットの名称に「(ザコ)」が含まれている場合「30」が、そうでない場合は「0」が入ります。

**最終値**最終～系のコンフィグ対象でのみ使用可能です。

最終的な結果(命中率など)に置換されます。

**気力**メインパイロットの気力に置換されます。

**耐久**メインパイロットの防御値に置換されます。

**ＬＶ**メインパイロットのレベルに置換されます。

**経験**メインパイロットの経験値に置換されます。

**ＳＰ**メインパイロットのＳＰに置換されます。

**霊力**メインパイロットの霊力に置換されます。

**格闘**メインパイロットの格闘に置換されます。

**射撃**メインパイロットの射撃に置換されます。

**命中**メインパイロットの命中に置換されます。

**回避**メインパイロットの回避に置換されます。

**技量**メインパイロットの技量に置換されます。

**反応**メインパイロットの反応に置換されます。

**最大ＨＰ**ユニットの最大ＨＰに置換されます。

**現在ＨＰ**ユニットの現在のＨＰに置換されます。

**最大ＥＮ**ユニットの最大ＥＮに置換されます。

**現在ＥＮ**ユニットの現在のＥＮに置換されます。

**移動力**ユニットの移動力に置換されます。

**装甲**ユニットの装甲値に置換されます。

**運動性**ユニットの運動性に置換されます。

**攻撃側ユニットＩＤ**攻撃側ユニットのユニットＩＤに置換されます。

**防御側ユニットＩＤ**防御側ユニットのユニットＩＤに置換されます。

ただし、計算処理の都合上**攻撃補正**の計算式では置換されません。

**武器番号**攻撃側のユニットが使用する武器の番号に置換されます。
