**特殊効果データ**

戦闘時の効果音などの特殊効果や、システムメッセージを指定するデータです。effect.txt に記述します。

特殊効果データは戦闘アニメがサポートされていないVer.1.6以前のSRCとの互換性を保つために残されています。戦闘アニメの表示がオンになっている場合、[戦闘アニメデータ](戦闘アニメデータ)における指定が優先されるため、特殊効果の指定には基本的に戦闘アニメデータを使うことをお勧めします。ただし戦闘アニメをオフした場合は特殊効果データの設定が使われるため、戦闘アニメをオフしてプレイすることを想定している場合は特殊効果データを使用してください。なお、特殊効果データで指定可能な効果は全て戦闘アニメデータでも指定可能です。

**書式**

データ名称

シチュエーション, 特殊効果

シチュエーション・特殊効果指定の組の数に制限はありません。１パターンにつき１行ずつ記述してください。

各行が長くなりすぎた場合は途中で改行することが出来ます。この場合は行の末尾に「\_」を付けて下さい。

「#」で始まる行はコメント行とみなされ、データ読み込みの際に存在しないものとして扱われます。また、「//」以降の文字列はコメント部分として無視されます。

**例**

ヒーロー

ヒーローヌンチャク, 2;Swing.wav;2;Swing.wav;2;Swing.wav;2;Swing.wav

ヒーローヌンチャク(解説), $(ユニット)は懐から通信販売で買ったヌンチャクを取り出し、掛け声と共に振り回した！

ヒーローヌンチャク(命中), Crash.wav

必殺！ムーンサルトキック(解説), $(ユニット)は飛び上がり、空中で一回転すると$(相手ユニット)めがけて鋭い蹴りを放った！

必殺！ムーンサルトキック(命中), \_

Jet.wav;1;Black.bmp 490 490;\_

1;Hero\_Kick.bmp  10  10 470 0 透過;\_

1;Hero\_Kick.bmp 100 100 380 0 透過;\_

1;Hero\_Kick.bmp 200 200 280 0 透過;\_

1;Hero\_Kick.bmp 300 300 180 0 透過;\_

1;Hero\_Kick.bmp 400 400  80 0 透過;\_

Red.bmp 480 480;\_

1;Hero\_Kick.bmp 500 500   0 0 透過;\_

1;Hero\_Kick.bmp 600 600;\_

Crash.wav

**項目解説**

**(1)データ名称**

特殊効果の対象を指定します。対象は以下のものが指定可能です。上のものほど特殊効果データ検索の際の優先順位が高くなっています。

**ユニット名称**

**ユニット愛称**(を修正した文字列)

**ユニットクラス**

「汎用」

ユニット愛称を指定する場合、愛称から以下の文字列を削除して下さい(ユニットに様々なバリエーションが存在する際に一括して指定が出来るようにするため)。

先頭の「～用」

先頭の「～型」

末尾の「(～)」

末尾の「改」

末尾の「カスタム」

**例** アリス専用高機動型シルフィード改(Ａモード) =&gt; シルフィード

ユニットクラスを指定する場合、専用指定や人間ユニットを表すための括弧は削除します。「汎用」を指定した場合、全てのユニットに対してそのデータが有効になります。

**例** ユニットクラスが「(剣士(ロイ専用))」の場合、「剣士」を指定。

メッセージデータやダイアログデータと異なり、同じ対象に対して複数の特殊効果データが定義された場合、それらすべての特殊効果データが有効になります。これは汎用的なユニットクラスの特殊効果を複数のデータファイルで記述できるようにするためです。

**(2)シチュエーション**

特殊効果やシステムメッセージが使用されるシチュエーションを指定したものです。

**戦闘時のシチュエーション**

**武器名(準備)**武器を使用する前(攻撃メッセージの直前)

**武器名**武器を使用する時(攻撃メッセージの直後)

**武器名(反撃)**武器を使用する時(反撃時)

**武器名(命中)**武器が命中した時

**武器名(クリティカル)**クリティカル(武器の特殊効果)が発生した時

**武器名(とどめ)**相手にとどめを刺した時

**武器名(回避)**指定した武器による攻撃が回避された時

**武器名(切り払い)**指定した武器による攻撃が切り払われた時

**武器名(迎撃)**指定した武器による攻撃が迎撃された時

**武器名(阻止)**指定した武器による攻撃が阻止された時

**武器名(反射)**指定した武器による攻撃が反射された時

**武器名(攻撃無効化)**指定した武器による攻撃がバリア等によって無効化された時

**アビリティ名**アビリティを使用する時

**回避**ユニットが攻撃を回避した時

**ダメージ小**ユニットが小程度のダメージを受けた時(ダメージ小メッセージの直前)

**ダメージ中**ユニットが中程度のダメージを受けた時(ダメージ中メッセージの直前)

**ダメージ大**ユニットが甚大なダメージを受けた時(ダメージ大メッセージの直前)

**破壊**ユニットが破壊された時(破壊メッセージの直前)

**脱出**ユニットが破壊され、マップから取り除かれる時(脱出メッセージの直後)

**射程外**反撃可能な武器がない時

**攻撃無効化**バリア等で攻撃を無効化した時

**ビーム無効化**対ビーム用防御能力(対象がＢ属性の防御能力)でビーム攻撃を無効化した時

**阻止**阻止で攻撃を無効化した時

**分身**分身、超回避、分身能力で攻撃を回避した時

**緊急テレポート**緊急テレポートで攻撃を回避した時

**反射**攻撃を反射した時

**当て身技**攻撃を当て身技で切り返した時

**シールド防御**シールドで攻撃を防御した時

**バリア貫通**ダメージ減少を伴わないバリアが貫通された時

**バリア発動**広域バリアを発動させた時

**フィールド発動**広域フィールドを発動させた時

**プロテクション発動**広域プロテクションを発動させた時

**自動反撃**自動反撃を発動させた時

**追加攻撃**追加攻撃を発動させた時

**ダミー**ダミーを使って攻撃を回避した時

**非戦闘時のシチュエーション**

**変形(*変形先名称*)**

**変形(*変形元名称*=&gt;*変形先名称*)**

**変形(*変形の別名*)**

**ハイパーモード(*変形先名称*)**

**ハイパーモード(*変形元名称*=&gt;*変形先名称*)**

**ハイパーモード(*ハイパーモードの別名*)**

**ハイパーモード**

**ノーマルモード(*変形先名称*)**

**ノーマルモード(*変形元名称*=&gt;*変形先名称*)**

**ノーマルモード**

**分離(*分離元名称*)**

**分離(*分離の別名*)**

**分離**

**破壊時分離(*分離元名称*)**

**破壊時分離(*分離の別名*)**

**破壊時分離**

**合体(*合体後名称*)**

**合体(*合体の別名*)**

**合体**

**テレポート**

**ジャンプ**

**チャージ**

**修理**

**補給**

**レベルアップ**

特定の特殊能力を使った時にのみ特殊効果を発動させたい場合は、シチュエーションの最後に「(特殊能力名)」を追加して下さい。システムメッセージ用のシチュエーションの場合は「～(特殊能力名)(解説)」のように指定します。

**例** 攻撃無効化(プロテクト・フィールド)

戦闘アニメデータと同名のシチュエーションがある場合は戦闘アニメ表示が優先されます。また、メッセージデータのシチュエーションと同名のシチュエーションがある場合はメッセージ、特殊効果の順に表示されます。

特殊効果データでは特殊効果だけでなく、戦闘時等に表示されるシステムメッセージの定義も可能です。「(解説)」を付けたシチュエーションを定義し、表示するメッセージを特殊効果指定の項目に記述してください。

**例**

奇妙な踊り(解説), $(ユニット)は奇妙な踊りを踊った！

システムメッセージにはメッセージデータのメッセージと同じ機能を使うことが出来ます(カットイン等)。

なお、システムメッセージが定義できるシチュエーションは特殊効果が指定可能なシチュエーションより限定されており、以下のものに限られます。

**武器名(解説)**

**攻撃(解説)** 全ての武器による攻撃開始メッセージに適用される

**武器名(命中)(解説)**

**アビリティ名(解説)**

**アビリティ(解説)** 全てのアビリティによるアビリティ使用開始メッセージに適用される

**回避(解説)**

**攻撃無効化(解説)**

**ビーム無効化(解説)**

**シールド防御(解説)**

**阻止(解説)**

**分身(解説)**

**反射(解説)**

**緊急テレポート(解説)**

**バリア発動(解説)**

**ダミー(解説)**

**復活(解説)**

**再生(解説)**

**浄化(解説)**

**分離(解説)**

**破壊時分離(解説)**

**破壊(解説)**

**(3)特殊効果**

指定されたシチュエーションの際に実行する特殊効果やシステムメッセージを記述します。特殊効果の指定はメッセージデータにおける演出効果の指定と同じです。カットイン、効果音、ディレイの効果を指定することができます。システムメッセージの場合は表示するメッセージをそのまま記述します。メッセージ中にはメッセージデータの場合と同様、「$(ユニット)」や「$(相手パイロット)」などのようにして自分や相手のデータを参照することができます。

**カットイン**

**書式** ファイル名 幅 高さ Ｘ Ｙ オプション

指定したファイルの画像をメインウィンドウに表示します。表示する画像ファイルの形式はビットマップファイル(.bmp)、JPEGファイル(.jpg)、GIFファイル(.gif)、PNGファイル(.png)が利用可能です。画像ファイルはBitmap\Cutinフォルダに格納しているものが使われますが、指定したファイルが見つからなかった場合は続いてBitmap\Eventフォルダ、Bitmap\Pilotフォルダ、Bitmap\Unitフォルダが検索されます。

ファイル名以外の引数は省略可能です。ただし幅と高さだけを省略することはできません。この場合はX,Yを指定したい場合は必ず幅と高さを指定して下さい。各引数を省略した場合、画像のサイズは元の画像のままになり、画面中央に表示されます。

**例** Alice.bmp 128 128 だと画面中央に128×128の大きさで画像が表示される

オプションには**透過**等、[**PaintPicture**コマンド](PaintPictureコマンド)で指定できるオプションが全て指定可能です。**PaintPicture**コマンドの解説を参照して下さい。なお、オプションを指定する場合は画像のサイズが４の倍数である必要があります。

カットイン描画による画面更新はメッセージ表示、もしくはディレイ実行時に行われます。ディレイ指定を行わず、連続してカットイン画像を指定すると最初の画像が表示されないので注意して下さい。

**カットインの消去**

**書式** Clear

描画したカットインを消去します。戦闘メッセージの終了時にカットインは自動的に消去されるので、消去指定は透過画像のカットインを切り換えるとき以外は必要ありません。

**カットインの持続**

**書式** Keep

戦闘メッセージが終了しても描画したカットインが消去されないようにします。この効果は必ず特殊効果データの最後に指定してください

**パイロット画像切り替え**

**書式** @ファイル名

指定したファイルの画像をメッセージウィンドウのパイロット画像画面に表示します。表示する画像ファイルの形式はビットマップファイル(.bmp)、JPEGファイル(.jpg)、GIFファイル(.gif)、PNGファイル(.png)が指定可能です。画像ファイルは[**PaintPicture**コマンド](PaintPictureコマンド)の場合と同じ順序で各フォルダから検索されます。

**例** @Alice.bmp

**カットインアニメ**

**書式** **カットイン**及び**パイロット画像切り替え**と同一

**カットイン**及び**パイロット画像切り替え**の指定において、ファイル名を連番で指定することでアニメーションを簡単に行うことができます。

**例** pic[01-04].bmp で pic01.bmp から pic04.bmp までの4枚の画像を連続描画

番号は必ず2桁で指定し、その間を「-」で結んで「[]」で囲ってください。ファイル名以外のオプションはそれぞれ通常の**カットイン**、**パイロット画像切り替え**の場合と同じです。

カットインアニメの表示に対してディレイが指定されている場合はアニメの描画全体にかかる時間がディレイの時間と等しくなります。ディレイが指定されなかった場合は待ち時間なしで連続で画像を切り替えます(PCによってアニメの表示時間が変わってしまうため、お勧めしません)。

**効果音**

**書式** WAVEファイル名 or MP3ファイル名

指定したWAVEファイル(MP3ファイル)を再生します。WAVEファイル(MP3ファイル)はSoundフォルダに格納しておいてください。ファイル名に「Null.wav」を指定すると効果音の再生を停止する事が出来ます。

**例** Sword.wav

**ディレイ**

**書式** 待ち時間

次のメッセージ、カットイン画像、効果音の表示の待ち時間を「指定した数値×0.1」秒に変更します。小数で指定することもできます。

![](../images/bm0.gif) 待ち時間は必ず待ち時間を指定したいものの**前**に配置して下さい。

**例** カットインCutin.jpgを0.3秒間表示するには「3;Cutin.jpg」

メッセージデータと同様、特殊効果データ中に「$(式)」の形で任意の式を記述することが可能です。式の結果が上の演出効果の書式に一致していればその演出効果が実行されます。この式置換の式評価は、特殊効果の表示がマウスの右ボタンクリックでキャンセルされてもキャンセルされません。

**例** 防御側ユニットのユニット画像を96×96のカットインとして表示。

$("Unit & Info(ユニット,相手ユニットＩＤ,グラフィック)) 96 96

**メッセージ**

**書式** 「メッセージ」及び『メッセージ』

指定したメッセージを表示します。

**例** 『聖霊よ、我に癒しの力を…: ヒーリング！』

特殊効果の指定が長くなってしまった場合は複数の行に分割することができます。改行した行の末尾に「\_」を指定してください。(上のデータ例を参照)

特殊効果に「-」とだけ指定しておくと、その特殊効果が選択された際に特殊効果が表示されなくなります。特定の場合に特殊効果を表示させない状況を発生させたい場合に使ってください。

**例** カットインを数分の１の確率でのみ表示させる
